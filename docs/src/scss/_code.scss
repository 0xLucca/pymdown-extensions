.md-typeset {

  /* Code that is also a link */
  a {
    > code {
      margin: 0 px2em(4px, 13.6px);
      padding: px2em(1px, 13.6px) 0;
      font-size: px2em(13.6px);
      background-color: var(--md-code-bg-color);
      border-radius: px2rem(2px);
      box-shadow:
        px2em( 4px, 13.6px) 0 0 var(--md-code-bg-color),
        px2em(-4px, 13.6px) 0 0 var(--md-code-bg-color);
      box-decoration-break: clone;
    }
  }

  /* Don't always like code breaking in table cells */
  td code {
    word-break: normal;
  }

  .codehilite {

    /* Needed for tab preserving mode */
    tab-size: 8;

    .hll {
      margin: 0 px2rem(-16px);
      padding: 0 px2rem(16px);
    }

    /* `pymdownx-inline` mode */
    [data-linenos] {

      /* Fix line number background and colors and interaction with highlight line */
      &::before {
        // position: initial;  // remove `sticky` mode
        left: px2em(-16px, 13.6px);
        float: left;
        margin-right: px2em(16px, 13.6px);
        margin-left: px2em(-16px, 13.6px);
        padding-left: px2em(16px, 13.6px);
        background-color: hsla(0, 0%, 96%, 1);
      }

      /* Special line mode coloring */
      &.special::before {
        background-color: var(--md-default-fg-color--lightest);
      }
    }
  }

  // [mobile -]: Stretch to whole width
  @include break-to-device(mobile) {

    // Full-width container
    > .codehilite {
      .hll {
        margin: 0 px2rem(-16px);
        padding: 0 px2rem(16px);
      }
    }
  }

  .highlight {
    @extend .codehilite;
  }

  .highlighttable {
    @extend .codehilitetable;
  }
}
